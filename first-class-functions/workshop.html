<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>First-class Functions</title>
  </head>
  <body>
    <h1>Open the console</h1>
    <script>
      // const returnsOne = () => 1;
      // const logger = (log) => console.log(typeof log);
      // logger(returnsOne);
      // logger(returnsOne());
      // const eventFunc = (event) => console.log(event.clientX, event.clientY);
      // window.addEventListener("click", eventFunc);
      // const one = (callback) => callback(1);
      // one(console.log);

      // const asyncDouble = (num, callback) => setTimeout(callback, 1000, num * 2);
      // asyncDouble(10, console.log);
      // const light = (str, callback) =>
      //   setTimeout(() => {
      //     console.log(str);
      //     if (callback) callback();
      //   }, 1000);
      // light("green", () =>
      //   light("amber", () =>
      //     light("red", () => {
      //       light("red");
      //       light("amber", () => light("green", () => light("finished")));
      //     })
      //   )
      // );
      const light = (str, ...args) => {
        setTimeout(() => {
          if (str) console.log(str);
          let tempIndex = 0;
          while (typeof args[tempIndex] == "string") console.log(args[tempIndex++]);
          if (args.length > tempIndex + 1) {
            args[tempIndex](args[tempIndex + 1], ...args.slice(tempIndex + 2));
          }
        }, 1000);
      };
      light("green", light, "amber", light, "red", light, "red", "amber", light, "green", light, "finished");
    </script>
  </body>
</html>
